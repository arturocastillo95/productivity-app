(this.webpackJsonpproductivityreact=this.webpackJsonpproductivityreact||[]).push([[0],{175:function(e,t,a){e.exports=a(371)},180:function(e,t,a){},181:function(e,t,a){},371:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(13),c=a.n(s),l=(a(180),a(7)),i=(a(181),a(42)),o=a(9),u=a.n(o),m=a(14),f=a(85),d=a(57),p=a.n(d);function h(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}function E(e){var t=~~(e/3600),a=~~(e%3600/60),n=~~e%60,r="";return t>0&&(r+=t+":"+(a<10?"0":"")),r+=a+":"+(n<10?"0":""),r+=""+n}function v(e){var t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+a+"-"+t}function k(){var e,t=new Date,a=[t];for(e=-1;e>-8;e--){var n=t;a.unshift(n.addDays(e))}return a.map((function(e){return v(e)}))}Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};var b=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L+"api/task-update/"+t.id+"/",e.prev=1,e.next=4,fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a},body:JSON.stringify(t)});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L+"api/task-create/",e.prev=1,e.next=4,fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a},body:JSON.stringify(t)});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}();function g(){return(g=Object(m.a)(u.a.mark((function e(){var t,a,n,r,s,c,l,i,o,m,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=k(),a=t.length,n=[],r=h("csrftoken"),s=0;s<50;s++)c=Math.floor(5401*Math.random())+1800,l=Math.floor(Math.random()*c),i=Math.random()>=.5,o={title:"Sample Task "+s,duration:c,remaining:l},i&&(m=Math.floor(Math.random()*a),o.completed=!0,o.finish_date=t[m]),n.push(o);return e.next=7,n.forEach((function(e){N(e,r)}));case 7:return f=e.sent,e.abrupt("return",f);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(e){var t=e.seconds,a=e.onTimeUpdate,s=e.markAsComplete,c=Object(n.useState)(t),i=Object(l.a)(c,2),o=i[0],u=i[1];return Object(n.useEffect)((function(){if(o){var e=setInterval((function(){o>0&&(u(o-1),a(o))}),1e3);return 1===o&&(u(0),a(0),s()),function(){return clearInterval(e)}}}),[o]),Object(n.useEffect)((function(){u(t)}),[t]),r.a.createElement("div",null,r.a.createElement("h1",{className:"has-text-success"},E(o)))},O=function(e){var t=e.value,a=e.onTimerStart,s=e.onTimerPause,c=e.markAsComplete,i=Object(n.useState)({state:"paused",seconds:"0"}),o=Object(l.a)(i,2),u=o[0],m=o[1],f=Object(n.useContext)(C),d=f.active,p=f.setActive;return r.a.createElement("div",{className:"level-item "+(t.completed?"is-hidden":"")},"paused"===u.state&&!1===d&&r.a.createElement("a",{href:"/#",onClick:function(){m({state:"running",seconds:t.remaining}),a(),p(!0)}},r.a.createElement("span",{className:"icon has-text-success"},r.a.createElement("i",{className:"fas fa-play"}))),"running"===u.state&&r.a.createElement("a",{href:"/#",onClick:function(){m({state:"paused",seconds:"0"}),p(!1),s()}},r.a.createElement("span",{className:"icon has-text-success"},r.a.createElement("i",{className:"fas fa-pause"}))),"running"===u.state&&r.a.createElement(T,{seconds:u.seconds,onTimeUpdate:function(e){var a=h("csrftoken"),n=t;n.remaining=e,b(n,a)},markAsComplete:function(){p(!1),c()}}),"running"===u.state&&r.a.createElement("a",{href:"/#"},r.a.createElement("span",{className:"icon has-text-warning",onClick:function(){m({state:"running",seconds:t.duration})}},"\xa0\xa0",r.a.createElement("i",{className:"fas fa-redo-alt"}))))},j=Object(f.b)((function(e){var t=e.value,a=e.onActivateTask,s=e.onDeleteTask,c=e.onFinishedTask,i=e.onEditTask,o=Object(n.useState)(!1),u=Object(l.a)(o,2),m=u[0],f=u[1];return r.a.createElement("li",{className:"box "+(m?"task-is-active":"")},r.a.createElement("div",{className:"level is-mobile"},r.a.createElement("div",{className:"level-left"},r.a.createElement("input",{className:" "+(t.completed?"is-hidden":""),type:"checkbox",onChange:function(){return c(t)}})),r.a.createElement("div",{className:"level-item"},r.a.createElement("div",null,r.a.createElement("h1",{className:"title is-5 "+(t.completed?"is-completed":"")},t.title),!1===m&&r.a.createElement("p",{className:"is-help has-text-centered"},E(t.remaining)))),r.a.createElement("div",{className:"level-right"},r.a.createElement(O,{value:t,onTimerStart:function(){a(t.id),f(!0)},onTimerPause:function(){return f(!1)},markAsComplete:function(){f(!1),c(t)}}),!1===m&&r.a.createElement("div",{className:"level-item "+(t.completed?"is-hidden":""),onClick:function(e){return i(t)}},r.a.createElement("a",{href:"#/"},r.a.createElement("span",{className:"icon has-text-warning"},r.a.createElement("i",{className:"fas fa-edit"})))),r.a.createElement("div",{className:"level-item"},r.a.createElement("a",{href:"#/",onClick:function(e){return s(t)}},r.a.createElement("span",{className:"icon has-text-danger"},r.a.createElement("i",{className:"fas fa-lg fa-times"})))))))})),w=Object(f.a)((function(e){var t=e.items,a=e.onFocusTask,n=e.onDeleteTask,s=e.onFinishedTask,c=e.onEditTask;function l(e){var n=t.findIndex((function(t){return t.id===e}));a(n)}return r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement(j,{key:e.id,index:t,value:e,onActivateTask:l,onDeleteTask:n,onFinishedTask:s,onEditTask:c})})))})),C=r.a.createContext(!1);function x(e){var t=e.newTaskCreated,a=e.completedTasksList,s=e.onEditTask,c=e.onUpdateTasks,o=e.onSort,f=Object(n.useState)([]),d=Object(l.a)(f,2),E=d[0],v=d[1],k=Object(n.useState)(!1),N=Object(l.a)(k,2),g={active:N[0],setActive:N[1]},T=Object(n.useRef)(!0),O=Object(n.useState)(!0),j=Object(l.a)(O,2),x=j[0],y=j[1],S=function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=L+"api/task-list/"+(a?"completed/":"active/"),e.prev=1,e.next=4,fetch(t);case 4:return n=e.sent,e.abrupt("return",n.ok?n.json():null);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();function D(e){var t=h("csrftoken");e.forEach((function(e,a){e.order=a,b(e,t)}))}Object(n.useEffect)((function(){switch(o){default:break;case"longest":(e=Object(i.a)(E)).sort((function(e,t){return e.remaining<t.remaining?1:t.remaining<e.remaining?-1:0})),v(e);break;case"shortest":var e;(e=Object(i.a)(E)).sort((function(e,t){return e.remaining>t.remaining?1:t.remaining>e.remaining?-1:0})),v(e)}}),[o]),Object(n.useEffect)((function(){T.current?T.current=!1:S().then((function(e){e.sort((function(e,t){return e.order>t.order?1:t.order>e.order?-1:0}));var a=e.findIndex((function(e){return e.title===t.title}));(e=p()(e,a,0)).forEach((function(e,t){e.order=t})),v(e),D(e)}))}),[t]),Object(n.useEffect)((function(){S().then((function(e){e.sort((function(e,t){return e.order>t.order?1:t.order>e.order?-1:0})),v(e),y(!1)}))}),[c]);return r.a.createElement(r.a.Fragment,null,!0===x&&r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),!1===x&&r.a.createElement(C.Provider,{value:g},r.a.createElement(w,{items:E,onSortEnd:function(e){var t=e.oldIndex,a=e.newIndex,n=Object(i.a)(E);D(n=p()(n,t,a)),v(n)},onFocusTask:function(e){var t=p()(E,e,0);v(t)},onDeleteTask:function(e){var t=E.filter((function(t){return t.id!==e.id}));v(t);var a=h("csrftoken"),n=L+"api/task-delete/"+e.id+"/";fetch(n,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":a}})},onFinishedTask:function(e){var t=E.findIndex((function(t){return t.id===e.id})),a=Object(i.a)(E);a[t].completed=!0,a[t].finish_date=function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+a+"-"+t}();var n=h("csrftoken");v(a),b(a[t],n)},onEditTask:s})))}var y=a(137);function S(e){var t=e.setTaskDuration;return r.a.createElement("div",{className:"field pb-3"},r.a.createElement("label",{className:"label"},"Task duration"),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{onChange:function(e){return t(e.target.value)},defaultValue:"Short (30 min)"},r.a.createElement("option",null,"Short (30 min)"),r.a.createElement("option",null,"Medium (1 hr)"),r.a.createElement("option",null,"Long (2 hrs)"))),r.a.createElement("div",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-stopwatch"}))))}function D(e){var t=e.editValue,a=e.onTaskCreated,s=e.onCancelCreate,c=e.onUpdateTasks,i=Object(n.useState)(0===Object.keys(t).length?{title:"",duration:1800,remaining:1800}:t),o=Object(l.a)(i,2),u=o[0],m=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),u.title){var t=h("csrftoken");if(!u.id)return N(u,t),void a(u);b(u,t),c()}}},r.a.createElement("h1",{className:"title is-3 has-text-centered"},"Create New Task"),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Task Name"),r.a.createElement("div",{className:"control is-expanded"},r.a.createElement("input",{placeholder:"Get stuff done!",type:"text",className:"input",onChange:function(e){return t=e.target.value,u.title=t,void m(u);var t},defaultValue:u.title,autoFocus:!0}))),r.a.createElement(S,{setTaskDuration:function(e){switch(e){default:u.duration=u.remaining=1800,m(u);break;case"Medium (1 hr)":u.duration=u.remaining=3600,m(u);break;case"Long (2 hrs)":u.duration=u.remaining=7200,m(u)}}}),r.a.createElement("button",{type:"submit",className:"button is-success is-fullwidth"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement("span",{className:"has-text-weight-bold"},null!=u.id&&r.a.createElement("span",null,"Save changes"),""===u.title&&r.a.createElement("span",null,"Create Task")))),r.a.createElement("button",{className:"button is-danger is-fullwidth mt-3",onClick:s},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("span",{className:"has-text-weight-bold"},"Cancel")),""===u.title&&r.a.createElement("button",{className:"button is-info is-fullwidth mt-3",onClick:function(){(function(){return g.apply(this,arguments)})().then((function(e){return c()}))}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-vial"})),r.a.createElement("span",{className:"has-text-weight-bold"},"Generate Sample Tasks")))}var F=a(16);function M(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],s=t[1];function c(){var e,t=new Date,a=[t];for(e=-1;e>-8;e--){var n=t;a.unshift(n.addDays(e))}return a.map((function(e){return v(e)}))}return Object(n.useEffect)((function(){var e=function(){var e=Object(m.a)(u.a.mark((function e(){var a,n,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:a=e.sent,n=new Map,a.forEach((function(e){n.get(e.finish_date)?n.set(e.finish_date,n.get(e.finish_date)+1):n.set(e.finish_date,1)})),r=c(),l=[],r.forEach((function(e){var t={};t.name=e,t["Completed Tasks"]=n.get(e)?n.get(e):0,l.push(t)})),s(l);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=L+"api/task-list/",e.prev=1,e.next=4,fetch(t);case 4:return a=e.sent,e.abrupt("return",a.ok?a.json():null);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),r.a.createElement("div",{className:"container has-text-centered"},r.a.createElement("h2",{className:"title is-4"},"Completed Tasks"),r.a.createElement("h3",{className:"subtitle pb-5"},"Measure your productivity in the last 7 days"),r.a.createElement(F.e,{width:"90%",height:400},r.a.createElement(F.d,{data:a},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorComplete",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#1abc9c",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#1abc9c",stopOpacity:0}))),r.a.createElement(F.a,{strokeDasharray:"3 3"}),r.a.createElement(F.g,{dataKey:"name"}),r.a.createElement(F.h,null),r.a.createElement(F.f,null),r.a.createElement(F.b,null),r.a.createElement(F.c,{type:"monotone",dataKey:"Completed Tasks",stroke:"#1abc9c",activeDot:{r:8},fill:"url(#colorComplete)"}))))}var L="https://productivity-app-react.herokuapp.com/";var A=function(){var e=Object(n.useState)({task:{},show:!1}),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)({}),i=Object(l.a)(c,2),o=i[0],u=i[1],m=Object(n.useState)("toDo"),f=Object(l.a)(m,2),d=f[0],p=f[1],h=Object(n.useState)(!1),E=Object(l.a)(h,2),v=E[0],k=E[1],b=Object(n.useState)("no-sort"),N=Object(l.a)(b,2),g=N[0],T=N[1];return r.a.createElement("div",{className:"main py-3"},r.a.createElement("h1",{className:"title has-text-centered py-3"},"Productivity ",r.a.createElement("span",{className:"has-text-weight-light"},"App")),r.a.createElement("div",{className:"tabs is-centered is-boxed"},r.a.createElement("ul",null,r.a.createElement("li",{className:"toDo"===d?"is-active":"",onClick:function(){return p("toDo")}},r.a.createElement("a",{href:"#/"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-stream","aria-hidden":"true"})),r.a.createElement("span",null,"To Do"))),r.a.createElement("li",{className:"completedList"===d?"is-active":"",onClick:function(){return p("completedList")}},r.a.createElement("a",{href:"/#"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-check","aria-hidden":"true"})),r.a.createElement("span",null,"Completed"))),r.a.createElement("li",{className:"stats"===d?"is-active":"",onClick:function(){return p("stats")}},r.a.createElement("a",{href:"/#"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-chart-line","aria-hidden":"true"})),r.a.createElement("span",null,"Stats"))))),"completedList"===d&&r.a.createElement("section",{className:"container is-fluid has-text-centered"},r.a.createElement(x,{newTaskCreated:o,completedTasksList:!0})),"toDo"===d&&r.a.createElement("section",{className:"container is-fluid has-text-centered"},r.a.createElement("div",{className:"columns is-variable is-1 is-mobile"},r.a.createElement("div",{className:"column is-9"},r.a.createElement("a",{href:"/#",className:"button mb-5 is-fullwidth is-rounded",onClick:function(e){return s({task:{},show:!0})}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("span",null,"Create new task"))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("div",{className:"select is-fullwidth is-rounded"},r.a.createElement("select",{defaultValue:"No sort",onChange:function(e){return function(e){switch(console.log(e),e){default:break;case"Longest tasks":T("longest");break;case"Shortest tasks":T("shortest")}}(e.target.value)}},r.a.createElement("option",null,"No sort"),r.a.createElement("option",null,"Longest tasks"),r.a.createElement("option",null,"Shortest tasks"))),r.a.createElement("div",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-filter"}))))),r.a.createElement(x,{newTaskCreated:o,completedTasksList:!1,onEditTask:function(e){s({task:e,show:!0})},onUpdateTasks:v,onSort:g}),r.a.createElement(y.Modal,{show:a.show,onClose:function(){return s({task:{},show:!1})}},r.a.createElement("div",{className:"box modal-box"},r.a.createElement(D,{editValue:a.task,onTaskCreated:function(e){u(e),s({task:{},show:!1})},onCancelCreate:function(){s({task:!1,show:!1})},onUpdateTasks:function(){s({task:{},show:!1}),k(!0)}})))),"stats"===d&&r.a.createElement(M,null))};c.a.render(r.a.createElement(A,null),document.getElementById("root"))}},[[175,1,2]]]);
//# sourceMappingURL=main.502be529.chunk.js.map